<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>إدارة الموظفين - صالون لمسة إبداعية</title>
<style>
body { font-family:'Cairo',sans-serif; background:#111; color:#fff; margin:0; padding:0; }
header { text-align:center; padding:20px 0; background:#111; border-bottom:2px solid #444; }
header img { width:100px;height:100px;border-radius:50%;object-fit:cover;border:4px solid gold;box-shadow:0 0 15px gold; }
header h1 { margin:10px 0 0 0;font-size:26px;color:gold; text-shadow:0 0 10px gold; }

.container { max-width:1200px; margin:auto; padding:20px; }
.nav-row { display:flex; flex-wrap:wrap; gap:10px; margin-bottom:20px; }
.nav-row button { flex:1; padding:12px; font-weight:bold; font-size:16px; border:none; border-radius:6px; cursor:pointer; background:gold; color:#111; transition:0.3s; }
.nav-row button:hover { background:#ffbf00; }

.table-container { overflow-x:auto; }
table { width:100%; border-collapse:collapse; margin-top:20px; }
th, td { padding:12px; border:1px solid #444; text-align:center; }
th { background:gold; color:#111; }
td { background:#1c1c1c; color:#fff; }
.action-btn { padding:6px 10px; border:none; border-radius:5px; cursor:pointer; transition:0.2s; }
.edit-btn { background:#32cd32; color:#111; }
.edit-btn:hover { background:#28a428; }
.delete-btn { background:#ff4c4c; color:#fff; }
.delete-btn:hover { background:#e60000; }
.add-btn { background:#00c6ff; color:#111; margin-top:15px; }
.add-btn:hover { background:#0099cc; }

.logout-btn { width:100%; padding:15px; background:#ff4c4c; color:#fff; font-weight:bold; border:none; border-radius:6px; cursor:pointer; transition:0.2s; margin-top:20px; }
.logout-btn:hover { background:#e60000; }
</style>
</head>
<body>

<header>
<img src="logo.jpg" alt="Logo">
<h1>إدارة الموظفين</h1>
</header>

<div class="container">

<div class="nav-row">
<button onclick="location.href='admin-dashboard.html'">لوحة المدير</button>
<button onclick="location.href='admin-sales.html'">إدارة المبيعات</button>
<button onclick="logout()">تسجيل الخروج</button>
</div>

<button class="add-btn" onclick="addEmployee()">إضافة موظف جديد</button>

<div class="table-container">
<table id="employeesTable">
<thead>
<tr><th>الاسم</th><th>اسم المستخدم</th><th>كلمة المرور</th><th>إجراءات</th></tr>
</thead>
<tbody></tbody>
</table>
</div>

<button class="logout-btn" onclick="logout()">تسجيل الخروج</button>

</div>

<script src="localStorage_data.js"></script>
<script>
if(!localStorage.getItem("isAdminLoggedIn")){
    alert("⚠ يجب تسجيل الدخول كمدير!");
    window.location.href="index.html";
}

function renderEmployees(){
    const workers=getWorkers();
    const tbody=document.getElementById("employeesTable").querySelector("tbody");
    tbody.innerHTML="";
    workers.forEach((w,i)=>{
        const tr=document.createElement("tr");
        tr.innerHTML=`<td>${w.name}</td><td>${w.username}</td><td>${w.password}</td>
        <td>
            <button class="action-btn edit-btn" onclick="editEmployee(${i})">تعديل</button>
            <button class="action-btn delete-btn" onclick="deleteEmployee(${i})">حذف</button>
        </td>`;
        tbody.appendChild(tr);
    });
}

function addEmployee(){
    const name=prompt("ادخل اسم الموظف:");
    if(!name) return;
    const username=prompt("ادخل اسم المستخدم:");
    if(!username) return;
    const password=prompt("ادخل كلمة المرور:");
    if(!password) return;
    const workers=getWorkers();
    workers.push({name,username,password});
    localStorage.setItem("workers",JSON.stringify(workers));
    renderEmployees();
}

function editEmployee(index){
    const workers=getWorkers();
    const w=workers[index];
    const name=prompt("تعديل الاسم:",w.name);
    if(!name) return;
    const username=prompt("تعديل اسم المستخدم:",w.username);
    if(!username) return;
    const password=prompt("تعديل كلمة المرور:",w.password);
    if(!password) return;
    workers[index]={name,username,password};
    localStorage.setItem("workers",JSON.stringify(workers));
    renderEmployees();
}

function deleteEmployee(index){
    if(!confirm("هل أنت متأكد من الحذف؟")) return;
    const workers=getWorkers();
    workers.splice(index,1);
    localStorage.setItem("workers",JSON.stringify(workers));
    renderEmployees();
}

function logout(){ logoutAdmin(); window.location.href='index.html'; }

renderEmployees();
window.addEventListener("storage", e=>{ if(e.key==='workersUpdated') renderEmployees(); });
</script>
</body>
</html>
